<link rel="import" href="elements.html">
<link rel="import" href="uqlibrary-borrowing-list.html">

<dom-module id="uqlibrary-fines">
  <template>
    <style is="custom-style" include="iron-flex iron-flex-alignment common-styles">
      :host {
        @apply(--layout-vertical);
        @apply(--uql-app-host);
      }

      section {
        padding: 10px;
      }

      paper-button[disabled] {
        background-color: var(--secondary-color-light);
        color: var(--secondary-color);
      }
    </style>

    <section class="flex">
      <uqlibrary-borrowing-list items="{{processedItems}}" empty-message="No overdue charges"></uqlibrary-borrowing-list>
    </section>

    <paper-toolbar class="uqlibrary-app-footer">
      <!-- Total -->
      <span class="subhead"><strong>Total:</strong> [[moneyFormat(finesSum)]]</span>
      <span class="flex"></span>
      <!-- Info -->
      <paper-button class="button-theme"
                    on-tap="_toggleInfo"
                    title="Info"
                    aria-label="More information about overdue charges">
        INFO
      </paper-button>
      <!-- Pay Now -->
      <paper-button class="button-colored-theme"
                    on-tap="_openUrl"
                    title="Pay now"
                    disabled$="{{hidePayNow}}"
                    aria-label="Pay overdue charges now">
        PAY NOW
      </paper-button>
    </paper-toolbar>

    <paper-dialog id="finesInfoDialog" entry-animation="scale-up-animation" exit-animation="fade-out-animation">
      <h2>Payment Info</h2>
      <p>
        You don't need to pay your overdue charges unless you reach <span>{{moneyFormat(fineMinimumPayableAmount)}}</span>.
        You currently have <span>{{moneyFormat(finesSum)}}</span>, so you <span hidden$="{{!hidePayNow}}">don't </span>need to pay your overdue charges.
      </p>
      <div>
        <a href="https://www.library.uq.edu.au/help/borrowing#overdues" target="_blank">
          <iron-icon icon="info-outline"></iron-icon> About overdue charges
        </a>&nbsp;&nbsp;&nbsp;

        <a href="https://www.library.uq.edu.au/help/payment-options" target="_blank">
          <iron-icon icon="info-outline"></iron-icon> Payment options
        </a>
      </div>
      <div class="buttons">
        <paper-button class="button-colored-theme" dialog-dismiss>Okay, I got it</paper-button>
      </div>
    </paper-dialog>
  </template>

  <!-- Location of the script -->
  <script src="uqlibrary-fines.js"></script>

</dom-module>