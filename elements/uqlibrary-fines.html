<link rel="import" href="elements.html">
<link rel="import" href="uqlibrary-borrowing-list.html">

<dom-module id="uqlibrary-fines">
  <link rel="import" type="css" href="uqlibrary-borrowing.css">
  <template>

    <iron-signals on-core-signal-transitioning-change="transitioningChangeHandler"></iron-signals>
    <section name="list" class="body-footer-container">
      <uqlibrary-borrowing-list id="finesList" items="{{processedItems}}"></uqlibrary-borrowing-list>
    </section>

    <uqlibrary-persistent-footer id="persistentFooter" actionbuttons="{{footer}}">
      <div layout="" horizontal="" class="persistentFooter">
        <div class="footerInfo flex"> <b>Total</b>: <span>{{moneyFormat(finesSum)}}</span> </div>
        <div class="footerButtons">
          <paper-button data-dialog="finesInfoDialog">Info</paper-button>
          <a target="_blank" href="{{_getHref()}}" tabindex="-1">
            <paper-button raised class="colored" disabled$="{{_lessThenMin()}}">Pay now</paper-button>
          </a>
        </div>
      </div>
    </uqlibrary-persistent-footer>

    <paper-dialog id="finesInfoDialog">
      <p>
        You don't need to pay your overdue charges unless you reach <span>{{moneyFormat(fineMinimumPayableAmount)}}</span>.
        You currently have <span>{{moneyFormat(finesSum)}}</span>, so you <span>{{needToPay}}</span> to pay your overdue charges.
      </p>
      <template is="dom-repeat" items="{{contextual}}" as="button">
        <div class="text-container">
          <a target="_blank" id="{{button.id}}" on-click="contextualButtonClicked"
             href$="{{button.url}}" on-click="{{contextualButtonClicked}}">
            <iron-icon class="link" icon="info-outline"></iron-icon>{{button.title}}
          </a>
        </div>
      </template>
      <div class="buttons">
        <paper-button class="colored" raised="" dialog-dismiss>Okay, I got it</paper-button>
      </div>
    </paper-dialog>
  </template>

  <!-- Location of the script -->
  <script src="../scripts/uqlibrary-fines.js"></script>

</dom-module>